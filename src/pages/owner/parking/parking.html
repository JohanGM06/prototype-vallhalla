<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Enhanced SEO Meta Tags -->
  <meta name="description"
    content="Sistema integral de gestión de parqueaderos en Puerta de la Alameda. Reserve espacios de estacionamiento, administre sus vehículos y realice pagos seguros en línea. Gestión eficiente para propietarios y residentes." />
  <meta name="keywords"
    content="parqueadero residencial, reserva parqueadero, gestión vehicular, pago parqueadero, estacionamiento conjunto residencial, Puerta de la Alameda, Valhalla" />
  <meta name="author" content="Valhalla - Sistema de Administración de Propiedades" />
  <meta name="robots" content="index, follow" />
  <meta name="language" content="Spanish" />
  <meta name="revisit-after" content="7 days" />

  <!-- Enhanced Open Graph / Social Media -->
  <meta property="og:title" content="Sistema de Gestión de Parqueadero | Puerta de la Alameda" />
  <meta property="og:description"
    content="Gestione sus espacios de parqueadero de forma eficiente. Reserve, pague y administre sus vehículos en línea." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://puertadelaalameda.com/owner/parking" />
  <meta property="og:site_name" content="Valhalla - Puerta de la Alameda" />
  <meta property="og:locale" content="es_CO" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Sistema de Gestión de Parqueadero | Puerta de la Alameda" />
  <meta name="twitter:description"
    content="Gestione sus espacios de parqueadero de forma eficiente. Reserve, pague y administre sus vehículos en línea." />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://puertadelaalameda.com/owner/parking" />

  <title>Sistema de Gestión de Parqueadero | Puerta de la Alameda</title>

  <!-- Preload critical assets -->
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" as="style" />
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" as="style" />
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" as="style" />

  <!-- Stylesheets -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" />
  <link rel="stylesheet" href="../../../styles/components/navbar.css" />

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
  <!-- Skip to main content for accessibility -->
  <a href="#main-content" class="visually-hidden-focusable">
    Saltar al contenido principal
  </a>

  <div class="container-fluid">
    <div class="row flex-nowrap">
      <!-- Sidebar Navigation -->
      <aside id="sidebar" class="col-auto px-0 bg-white border-end" style="width: 280px" role="navigation"
        aria-label="Menú principal">
        <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 min-vh-100">
          <a href="../owner.html"
            class="d-flex align-items-center pb-3 mb-md-1 mt-md-3 me-md-auto text-dark text-decoration-none">
            <span class="fs-5 fw-bolder">VALHALLA</span>
          </a>
          <ul class="nav flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start w-100">
            <li class="nav-item w-100">
              <a href="../owner.html" class="nav-link text-dark px-0">
                <i class="bi bi-megaphone"></i> <span class="ms-2">ANUNCIOS</span>
              </a>
            </li>
            <li class="nav-item w-100">
              <a href="../surveys/surveys.html" class="nav-link text-dark px-0">
                <i class="bi bi-clipboard-data"></i>
                <span class="ms-2">ENCUESTAS</span>
              </a>
            </li>
            <li class="nav-item w-100">
              <a href="../payments/payments.html" class="nav-link text-dark px-0">
                <i class="bi bi-credit-card"></i>
                <span class="ms-2">PAGOS</span>
              </a>
            </li>
            <li class="nav-item w-100">
              <a href="../parking/parking.html" class="nav-link text-dark px-0">
                <i class="bi bi-p-square"></i>
                <span class="ms-2">PARQUEADERO</span>
              </a>
            </li>
            <li class="nav-item w-100">
              <a href="../reservations/reservations.html" class="nav-link text-dark px-0">
                <i class="bi bi-calendar-check"></i>
                <span class="ms-2">RESERVAS</span>
              </a>
            </li>
            <li class="nav-item w-100">
              <a href="../pets/pets.html" class="nav-link text-dark px-0">
                <i class="bi bi-heart"></i> <span class="ms-2">MASCOTAS</span>
              </a>
            </li>
            <li class="nav-item w-100">
              <a href="../tenants/tenants.html" class="nav-link text-dark px-0">
                <i class="bi bi-person-check"></i>
                <span class="ms-2">ARRENDATARIOS</span>
              </a>
            </li>
            <li class="nav-item w-100">
              <a href="../pqrs/pqrs.html" class="nav-link text-dark px-0">
                <i class="bi bi-question-circle"></i>
                <span class="ms-2">PQRS</span>
              </a>
            </li>
          </ul>
        </div>
      </aside>

      <!-- Main Content Area -->
      <main id="main-content" class="col p-0" role="main">
        <!-- Header -->
        <header class="navbar navbar-expand-lg bg-white border-bottom px-3 fixed-navbar" role="banner">
          <div class="container-fluid">
            <div class="d-flex align-items-center">
              <button class="btn btn-link text-dark px-0 me-3" id="sidebarToggle">
                <i class="bi bi-list fs-4"></i>
              </button>
              <h2 class="navbar-text fs-4">PUERTA DE LA ALAMEDA</h2>
              <h4 class="fs-6" style="margin-top: 20px">Valhalla</h4>
            </div>

            <div class="d-flex align-items-center ms-auto">
              <div class="input-group me-3">
                <span class="input-group-text bg-white border-end-0">
                  <i class="bi bi-search"></i>
                </span>
                <input type="text" class="form-control border-start-0" placeholder="Search" />
              </div>

              <button class="btn btn-link text-dark">
                <i class="bi bi-bell fs-5"></i>
              </button>
              <a href="../profile/profile.html" class="btn btn-link text-dark" role="button" aria-label="Ir a mi perfil">
                <i class="bi bi-person fs-5" aria-hidden="true"></i>
              </a>
              <button class="btn btn-link text-dark">
                <i class="bi bi-escape fs-5"></i>
              </button>
            </div>
          </div>
        </header>

        <!-- Main Content Section -->
        <section class="container-fluid content-wrapper p-4" aria-label="Gestión de parqueaderos">
          <!-- Search and Filter Controls -->
          <div class="d-flex justify-content-between align-items-center mb-4">
            <div class="d-flex gap-2 mt-5">
              <div class="input-group" role="search">
                <label for="searchInput" class="visually-hidden">Buscar parqueadero</label>
                <input type="text" class="form-control" id="searchInput" placeholder="Buscar parqueadero..."
                  oninput="filterParkings(this.value)" aria-label="Buscar parqueadero">
                <span class="input-group-text">
                  <i class="bi bi-search" aria-hidden="true"></i>
                </span>
              </div>
              <div class="btn-group">
                <button class="btn btn-outline-primary" onclick="toggleSortOrder()" aria-label="Ordenar parqueaderos">
                  <i class="bi bi-sort-numeric-down" aria-hidden="true"></i> Ordenar
                </button>
              </div>
            </div>
          </div>

          <!-- Parking Grid -->
          <div class="row g-4" id="parkingGrid" role="grid" aria-label="Lista de parqueaderos">
            <!-- Parking spots will be generated here -->
          </div>

          <!-- Parking Form Modal -->
          <div class="modal fade" id="parkingModal" tabindex="-1">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Formulario Parqueadero</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                  <form id="parkingForm">
                    <div class="mb-3">
                      <label class="form-label">Torre Apartamento</label>
                      <input type="search" class="form-control" list="towerList" id="towerNumber" required>
                      <datalist id="towerList">
                        <option value="Torre 1">
                        <option value="Torre 2">
                        <option value="Torre 3">
                        <option value="Torre 4">
                      </datalist>
                    </div>

                    <div class="mb-3">
                      <label class="form-label">Num Apartamento</label>
                      <input type="search" class="form-control" list="apartmentList" id="apartmentNumber" required>
                      <datalist id="apartmentList">
                        <option value="101">
                        <option value="102">
                        <option value="103">
                        <option value="104">
                        <option value="201">
                        <option value="202">
                        <option value="203">
                        <option value="204">
                      </datalist>
                    </div>

                    <div class="mb-3">
                      <label class="form-label">Tipo de Vehículo</label>
                      <select class="form-select" id="vehicleType" onchange="toggleVehicleFields()" required>
                        <option value="">Seleccione...</option>
                        <option value="car">Automóvil</option>
                        <option value="motorcycle">Motocicleta</option>
                      </select>
                    </div>

                    <!-- Car Fields -->
                    <div id="carFields" style="display: none;">
                      <div class="mb-3">
                        <label class="form-label">Marca del Automóvil</label>
                        <input type="text" class="form-control" id="carBrand">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Modelo</label>
                        <input type="text" class="form-control" id="carModel">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Placa</label>
                        <input type="text" class="form-control" id="carPlate" placeholder="ABC123">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Color</label>
                        <input type="text" class="form-control" id="carColor">
                      </div>
                    </div>

                    <!-- Motorcycle Fields -->
                    <div id="motorcycleFields" style="display: none;">
                      <div class="mb-3">
                        <label class="form-label">Marca de la Motocicleta</label>
                        <input type="text" class="form-control" id="motorcycleBrand">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Cilindraje</label>
                        <input type="number" class="form-control" id="motorcycleCC" placeholder="125">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Placa</label>
                        <input type="text" class="form-control" id="motorcyclePlate" placeholder="ABC12D">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Color</label>
                        <input type="text" class="form-control" id="motorcycleColor">
                      </div>
                    </div>

                    <div class="mb-3">
                      <label class="form-label">Total a Pagar</label>
                      <input type="text" class="form-control" id="totalAmount" readonly>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                  <button type="button" class="btn btn-primary" onclick="proceedToPayment()">
                    Pagar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Add PayU Modal after the parking form modal -->
          <div class="modal fade" id="payuModal" tabindex="-1" aria-labelledby="payuModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                  <h5 class="modal-title" id="payuModalLabel">
                    <img src="https://www.payu.com.co/sites/colombia/files/payu_logo_white.png" height="30"
                      alt="PayU Logo">
                    Pasarela de Pago
                  </h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="container">
                    <!-- Payment Summary -->
                    <div class="row mb-4">
                      <div class="col-md-12">
                        <div class="card bg-light">
                          <div class="card-body">
                            <h6 class="card-title">Resumen de Pago</h6>
                            <div class="d-flex justify-content-between">
                              <span>Total a pagar:</span>
                              <strong>50.000 COP</strong>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Payment Method Selection -->
                    <div class="row mb-4">
                      <div class="col-12">
                        <label class="form-label">Método de Pago</label>
                        <div class="d-flex gap-3">
                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="creditCard"
                              value="credit" checked onchange="togglePaymentForm()">
                            <label class="form-check-label" for="creditCard">
                              <i class="bi bi-credit-card"></i> Tarjeta de Crédito
                            </label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="debitCard"
                              value="debit" onchange="togglePaymentForm()">
                            <label class="form-check-label" for="debitCard">
                              <i class="bi bi-credit-card-2-front"></i> Tarjeta Débito
                            </label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="pse" value="pse"
                              onchange="togglePaymentForm()">
                            <label class="form-check-label" for="pse">
                              <i class="bi bi-bank"></i> PSE
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Credit/Debit Card Form -->
                    <form id="cardPaymentForm" class="payment-form">
                      <div class="row g-3">
                        <div class="col-12">
                          <label class="form-label">Número de Tarjeta</label>
                          <input type="text" class="form-control" id="cardNumber" maxlength="19"
                            placeholder="1234 5678 9012 3456" required>
                          <div class="invalid-feedback">Número de tarjeta inválido</div>
                        </div>

                        <div class="col-12">
                          <label class="form-label">Nombre en la Tarjeta</label>
                          <input type="text" class="form-control" id="cardName" placeholder="NOMBRE APELLIDO" required>
                          <div class="invalid-feedback">Ingrese el nombre como aparece en la tarjeta</div>
                        </div>

                        <div class="col-md-6">
                          <label class="form-label">Fecha de Vencimiento</label>
                          <input type="text" class="form-control" id="expiryDate" placeholder="MM/YY" maxlength="5"
                            required>
                          <div class="invalid-feedback">Fecha inválida</div>
                        </div>

                        <div class="col-md-6">
                          <label class="form-label">CVV</label>
                          <input type="text" class="form-control" id="cvv" placeholder="CVV" maxlength="4" required>
                          <div class="invalid-feedback">CVV inválido</div>
                        </div>

                        <div class="col-12" id="installmentsSection">
                          <label class="form-label">Cuotas</label>
                          <select class="form-select">
                            <option value="1">1 cuota</option>
                            <option value="3">3 cuotas</option>
                            <option value="6">6 cuotas</option>
                            <option value="12">12 cuotas</option>
                          </select>
                        </div>
                      </div>
                    </form>

                    <!-- PSE Form -->
                    <form id="psePaymentForm" class="payment-form d-none">
                      <div class="row g-3">
                        <div class="col-12">
                          <label class="form-label">Banco</label>
                          <select class="form-select" required>
                            <option value="">Seleccione su banco</option>
                            <option value="bancolombia">Bancolombia</option>
                            <option value="davivienda">Davivienda</option>
                            <option value="bbva">BBVA</option>
                            <option value="bogota">Banco de Bogotá</option>
                          </select>
                        </div>
                        <div class="col-12">
                          <label class="form-label">Tipo de Cliente</label>
                          <select class="form-select" required>
                            <option value="natural">Persona Natural</option>
                            <option value="juridica">Persona Jurídica</option>
                          </select>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                  <button type="button" class="btn btn-primary" onclick="processPayuPayment()">
                    <i class="bi bi-lock-fill"></i> Pagar Ahora
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  <script src="../../../scripts/components/parking.js" defer></script>
  <script src="../../../scripts/components/navbarToggle.js" defer></script>
</body>

</html>